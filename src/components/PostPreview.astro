---
import { type CollectionEntry } from 'astro:content';
import FormattedDate from './FormattedDate.astro';

type Props = { post: CollectionEntry<'blog'>; class?: string; headingLevel?: 'h2' | 'h3' };

const { post, class: className, headingLevel = 'h2' } = Astro.props;
const { title, publishDate, updatedDate, excerpt, dateRange} = post.data;
const TitleTag = headingLevel;
---

<a 
    class:list={[
        'academic-link group block relative p-6 -mx-4 rounded-xl transition-all duration-300 ease-out', 
        className
    ]} 
    href={`/laboral/${post.id}/`}
>
    <div class="flex items-center justify-between gap-4">
        <div class="grow">
            <TitleTag class="title-text font-bold leading-tight transition-all duration-300 group-hover:translate-x-1 group-hover:text-blue-600">
                {title}
            </TitleTag>
            
            <div class="date-text mt-1">
                {dateRange ? (
                    <span>{dateRange}</span>
                ) : (
                    <FormattedDate date={publishDate} />
                )}
                
                {updatedDate && (
                    <span class="opacity-40 italic lowercase font-normal"> (actualizado)</span>
                )}
            </div>

            {excerpt && (
                <div class="mt-3 text-sm text-gray-600 dark:text-gray-400 line-clamp-2 leading-relaxed transition-colors group-hover:text-gray-900 dark:group-hover:text-gray-200">
                    {excerpt}
                </div>
            )}
        </div>

        <div class="flex-none opacity-0 transform -translate-x-4 transition-all duration-300 group-hover:opacity-100 group-hover:translate-x-0">
            <div class="bg-blue-600 text-white p-2 rounded-full shadow-lg shadow-blue-200 dark:shadow-none">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
            </div>
        </div>
    </div>
</a>

<style>
    .academic-link {
        font-family: 'Inter', sans-serif;
        border-left: 3px solid #f3f4f6; /* Línea más gruesa pero clarita al inicio */
        background: transparent;
    }

    .academic-link:hover {
        border-left-color: #3b82f6;
        /* Un fondo degradado muy sutil para que parezca una tarjeta */
        background: linear-gradient(90deg, rgba(59, 130, 246, 0.08) 0%, rgba(59, 130, 246, 0.01) 100%);
        transform: translateX(8px); /* Desplazamiento lateral al "entrar" */
    }

    /* Estilo oscuro para el hover */
    :global(.dark) .academic-link:hover {
        background: linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0%, rgba(24, 24, 27, 0) 100%);
    }

    .title-text {
        font-size: 1.15rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: #111827;
    }

    :global(.dark) .title-text {
        color: #f3f4f6;
    }

    .date-text {
        font-size: 0.8rem;
        color: #3b82f6;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
</style>